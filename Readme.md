# Микросервис для отправки сообщений в Kafka

## Описание

Данный микросервис получает сообщение от пользователя и отправляет его в очередь Kafka для дальнейшей обработки.

Сервис также предоставляет статистику принятых и обработанных сообщений.

## Использованный стек и технологии

- **Go**: Язык программирования, используемый для разработки программы. Управление зависимостями осуществляется через `go mod`.

- **Postgres**: Мощная объектно-реляционная система управления базами данных (СУБД). В проекте используется для хранения сообщений отправленных пользователем. 

- **KAFKA**: Система обработки потоковых данных, используемая для надежной передачи сообщений между компонентами системы. В проекте Kafka используется для асинхронной обработки сообщений и обеспечения высокой доступности и масштабируемости сервиса.

- **Docker**: Используется для создания контейнеризованной версии приложения, что обеспечивает легкость развертывания и изоляцию зависимостей.

- **Make**: Утилита для автоматизации процесса сборки программы. В проекте предусмотрены Makefile скрипты для упрощения процесса сборки и запуска.

- **Docker Compose**: Инструмент для определения и запуска многоконтейнерных Docker приложений. Используется для упрощения процесса сборки и запуска, особенно когда Make не доступен.

- **Swagger**: Используется для документирования API проекта. Позволяет автоматически генерировать интерактивную документацию API, которая доступна через веб-интерфейс.

### Используемые внутренние технологии

- **GIN**: Мощный HTTP веб-фреймворк, используемый для обработки веб-запросов. Позволяет быстро и удобно создавать маршруты и обрабатывать HTTP-запросы.

- **VIPER**: Библиотека для управления конфигурациями в Go. Используется для загрузки, чтения и структурирования конфигурационных файлов проекта, что облегчает управление настройками приложения.

Это основные технологии использованные в данном проекте.

### Общая информация о проекте.

Проект написан как тестовое задание, и рассматривается как учебный.
1. Реализован конфигуратор программы на базе пакета Viper, позволяющий настраивать программу при помощи ENV Variables или флагами при запуске.
2. Обработчик http запросов на базе пакета GIN - это ускоряет обработку и написание запросов.
3. Подключение к базе данных Postgers. Сама база в данном случае поднимается в докере.
4. Подключение а Kafka. Kafka тоже поднимается в докере и соответственно в очереди отправяются и читаются сообщения.

## Начало работы

Для запуска на своем компьютере необходимо скачать данный репозиторий

`link to this repo`

### Установка

Для запуска необходимо набрать:

`go mod tidy`

Данная команда скачивает все зависимости необходимые для работы программы.

Запустите Docker, без наличия Docker данная программа работать не будет.

Желательно иметь установленную программу Make, если у вас ее нет то описание как собрать программу без нее будет ниже.

### Make имеется и Docker запущен

Для первоначальной сборки и запуска пишем в корневом каталоге:

`make up_build`

Данная команда запускает сборку образа в докере и его запуск.

### Make утилита отсутствует или запуск происходит из среды Windows

Находясь в корневой папке данного проекта, введите команду:

`docker-compose up --build -d`

Данная команда запустит сборку Docker образа.

### Переходим к тестам

на своем компьютере откройте браузер и перейдите по ссылке

`http://localhos:8080/`

В данном Web интерфейсе можно отправит сообщение и получить статистику
Также можно посмотреть документацию в формате Swagger.

**В случае использования Postman**

сделайте POST запрос по ссылке `http://localhost:8080/message` в JSON формате

`{"data":"Your message here..."}`

чтобы получить статистику сделайте GET запрос `http://localhost:8080/getstat`

### Что необходимо улучшить.

В данном проекте нет логирования ошибок и запросов, что абсолютно недопустимо в продакшене. Необходимо добавить Логирование ошибок и запись их в БД.
